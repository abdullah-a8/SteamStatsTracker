{"ast":null,"code":"import _classCallCheck from\"/home/abdullah/steam_achievement_tracker-main/achievement-tracker/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/abdullah/steam_achievement_tracker-main/achievement-tracker/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/home/abdullah/steam_achievement_tracker-main/achievement-tracker/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/abdullah/steam_achievement_tracker-main/achievement-tracker/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/abdullah/steam_achievement_tracker-main/achievement-tracker/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import{uid}from\"react-uid\";import AdminSearchBar from\"./../AdminSearchBar\";import UserBar from\"./../UserBar\";import ReviewBar from\"./../ReviewBar\";import{HeaderButton,HeaderImage,HeadContainer,HeaderNavBar}from'../HeaderComponent';import{getReviewsOnAdmin,updateReview,deleteReviewOnAdmin,updateUsernameReputation}from'../../actions/review';import{deleteUserOnAdmin,getUsersOnAdmin}from\"../../actions/user\";import{logout}from'../../actions/reactAuth';import logo from'./../../steamIcon2.png';import\"./styles.css\";import{deleteVoteRecordByReview,deleteVoteRecordByUser}from\"../../actions/voteRecord\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var log=console.log;var Admin=/*#__PURE__*/function(_React$Component){_inherits(Admin,_React$Component);var _super=_createSuper(Admin);function Admin(props){var _this;_classCallCheck(this,Admin);_this=_super.call(this,props);_this.handleUserSearchChange=function(event){var target=event.target;_this.setState({userSearch:target.value});};_this.searchUser=function(){var userList=_this.state.users.filter(function(user){return user.username.includes(_this.state.userSearch);});_this.setState({usersOnPage:userList});};_this.handleReviewSearchChange=function(event){var target=event.target;_this.setState({reviewSearch:target.value});};_this.searchReview=function(){var reviewList=_this.state.reviews.filter(function(review){return review.title.includes(_this.state.reviewSearch);});_this.setState({reviewsOnPage:reviewList});};_this.deleteUser=function(username){var userList=_this.state.users.filter(function(user){return user.username!==username;});_this.setState({users:userList,usersOnPage:userList});// Delete this user in database\nvar user=_this.state.users.filter(function(user){return user.username===username;})[0];updateUsernameReputation(username,user.reputation,true);deleteUserOnAdmin(user);deleteVoteRecordByUser(username);};_this.deleteReview=function(reviewId){var reviewList=_this.state.reviews.filter(function(review){return review.id!==reviewId;});_this.setState({reviews:reviewList,reviewsOnPage:reviewList});// Delete this review in database\nvar review=_this.state.reviews.filter(function(review){return review.id===reviewId;})[0];deleteReviewOnAdmin(review);deleteVoteRecordByReview(review.author,reviewId);};_this.cancelReport=function(reviewId){var reviewList=_this.state.reviews.map(function(review){if(review.id===reviewId){review.reported=false;}return review;});_this.setState({reviews:reviewList,reviewsOnPage:reviewList});// Update review in database\nupdateReview(_this.state.reviews.filter(function(review){return review.id===reviewId;})[0]);};_this.refreshUsers=function(){_this.setState({usersOnPage:_this.state.users,userSearch:\"\"});};_this.refreshReviews=function(){_this.setState({reviewsOnPage:_this.state.reviews,reviewSearch:\"\"});};_this.state={userSearch:\"\",reviewSearch:\"\",users:[],usersOnPage:[],reviews:[],reviewsOnPage:[]};_this.deleteUser=_this.deleteUser.bind(_assertThisInitialized(_this));_this.deleteReview=_this.deleteReview.bind(_assertThisInitialized(_this));_this.refreshUsers=_this.refreshUsers.bind(_assertThisInitialized(_this));_this.refreshReviews=_this.refreshReviews.bind(_assertThisInitialized(_this));return _this;}_createClass(Admin,[{key:\"componentDidMount\",value:function componentDidMount(){getUsersOnAdmin(this);getReviewsOnAdmin(this);}},{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(HeadContainer,{bgId:\"dashboard\",children:/*#__PURE__*/_jsxs(HeaderNavBar,{children:[/*#__PURE__*/_jsx(HeaderImage,{to:\"/\",src:logo}),/*#__PURE__*/_jsx(\"div\",{className:\"group\",children:/*#__PURE__*/_jsx(HeaderButton,{path:\"/\",logoutFunc:function logoutFunc(){logout(_this2.props.app);},children:\"Log Out\"})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"admin-dashboard\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"admin-dashboard-component\",children:[/*#__PURE__*/_jsx(AdminSearchBar,{searchContent:this.state.userSearch,handleChange:this.handleUserSearchChange,enterButton:this.searchUser,refreshButton:this.refreshUsers}),this.state.usersOnPage.map(function(user){return/*#__PURE__*/_jsx(UserBar,{username:user.username,reputation:user.reputation,deleteUser:_this2.deleteUser},uid(user));})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"admin-dashboard-component\",children:[/*#__PURE__*/_jsx(AdminSearchBar,{searchContent:this.state.reviewSearch,handleChange:this.handleReviewSearchChange,enterButton:this.searchReview,refreshButton:this.refreshReviews}),this.state.reviewsOnPage.map(function(review){return/*#__PURE__*/_jsx(ReviewBar,{id:review.id,title:review.title,content:review.content,author:review.author,reputation:review.reputation,reported:review.reported,deleteReview:_this2.deleteReview,cancelReport:_this2.cancelReport},uid(review));})]})]})]});}}]);return Admin;}(React.Component);export default Admin;","map":{"version":3,"sources":["/home/abdullah/steam_achievement_tracker-main/achievement-tracker/src/react-components/Admin/index.js"],"names":["React","uid","AdminSearchBar","UserBar","ReviewBar","HeaderButton","HeaderImage","HeadContainer","HeaderNavBar","getReviewsOnAdmin","updateReview","deleteReviewOnAdmin","updateUsernameReputation","deleteUserOnAdmin","getUsersOnAdmin","logout","logo","deleteVoteRecordByReview","deleteVoteRecordByUser","log","console","Admin","props","handleUserSearchChange","event","target","setState","userSearch","value","searchUser","userList","state","users","filter","user","username","includes","usersOnPage","handleReviewSearchChange","reviewSearch","searchReview","reviewList","reviews","review","title","reviewsOnPage","deleteUser","reputation","deleteReview","reviewId","id","author","cancelReport","map","reported","refreshUsers","refreshReviews","bind","app","content","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { uid } from \"react-uid\";\n\nimport AdminSearchBar from \"./../AdminSearchBar\";\nimport UserBar from \"./../UserBar\";\nimport ReviewBar from \"./../ReviewBar\";\nimport { HeaderButton, HeaderImage, HeadContainer, HeaderNavBar } from '../HeaderComponent'\nimport { getReviewsOnAdmin, updateReview, deleteReviewOnAdmin, updateUsernameReputation } from '../../actions/review'\nimport { deleteUserOnAdmin, getUsersOnAdmin } from \"../../actions/user\"\nimport { logout } from '../../actions/reactAuth'\nimport logo from './../../steamIcon2.png'\nimport \"./styles.css\"\nimport { deleteVoteRecordByReview, deleteVoteRecordByUser } from \"../../actions/voteRecord\";\n\n\nconst log = console.log\n\nclass Admin extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      userSearch: \"\",\n      reviewSearch: \"\",\n      users: [],\n      usersOnPage: [],\n      reviews: [],\n      reviewsOnPage: []\n    }\n\n    this.deleteUser = this.deleteUser.bind(this)\n    this.deleteReview = this.deleteReview.bind(this)\n    this.refreshUsers = this.refreshUsers.bind(this)\n    this.refreshReviews = this.refreshReviews.bind(this)\n  }\n\n  componentDidMount() {\n    getUsersOnAdmin(this)\n    getReviewsOnAdmin(this)\n  }\n\n  handleUserSearchChange = event => {\n    const target = event.target;\n    this.setState({\n      userSearch: target.value\n    })\n  }\n\n  searchUser = () => {\n    const userList = this.state.users.filter(user => {\n      return user.username.includes(this.state.userSearch)\n    })\n\n    this.setState({\n      usersOnPage: userList\n    })\n  }\n\n  handleReviewSearchChange = event => {\n    const target = event.target;\n    this.setState({\n      reviewSearch: target.value\n    })\n  }\n\n  searchReview = () => {\n    const reviewList = this.state.reviews.filter(review => {\n      return review.title.includes(this.state.reviewSearch)\n    })\n\n    this.setState({\n      reviewsOnPage: reviewList\n    })\n  }\n\n  deleteUser = username => {\n    const userList = this.state.users.filter(user => user.username !== username)\n    this.setState({\n      users: userList,\n      usersOnPage: userList\n    })\n\n    // Delete this user in database\n    const user = this.state.users.filter(user => user.username === username)[0]\n    updateUsernameReputation(username, user.reputation, true)\n    deleteUserOnAdmin(user)\n    deleteVoteRecordByUser(username)\n\n  }\n\n  deleteReview = reviewId => {\n    const reviewList = this.state.reviews.filter(review => review.id !== reviewId)\n    this.setState({\n      reviews: reviewList,\n      reviewsOnPage: reviewList\n    })\n\n    // Delete this review in database\n    const review = this.state.reviews.filter(review => review.id === reviewId)[0]\n    deleteReviewOnAdmin(review)\n    deleteVoteRecordByReview(review.author, reviewId)\n  }\n\n  cancelReport = reviewId => {\n    const reviewList = this.state.reviews.map(review => {\n      if (review.id === reviewId) {\n        review.reported = false\n      }\n      return review\n    })\n    this.setState({\n      reviews: reviewList,\n      reviewsOnPage: reviewList\n    })\n\n    // Update review in database\n    updateReview(this.state.reviews.filter(review => review.id === reviewId)[0])\n  }\n\n  refreshUsers = () => {\n    this.setState({\n      usersOnPage: this.state.users,\n      userSearch: \"\"\n    })\n  }\n\n  refreshReviews = () => {\n    this.setState({\n      reviewsOnPage: this.state.reviews,\n      reviewSearch: \"\"\n    })\n  }\n\n  render() {\n    return (\n      <div>\n        <HeadContainer bgId={\"dashboard\"}>\n          <HeaderNavBar>\n            <HeaderImage to='/' src={logo} />\n            <div className='group'>\n              <HeaderButton path='/' logoutFunc={() => { logout(this.props.app) }}>Log Out</HeaderButton>\n            </div>\n          </HeaderNavBar>\n        </HeadContainer>\n\n        <div className=\"admin-dashboard\">\n          <div className=\"admin-dashboard-component\">\n            <AdminSearchBar\n              searchContent={this.state.userSearch}\n              handleChange={this.handleUserSearchChange}\n              enterButton={this.searchUser}\n              refreshButton={this.refreshUsers}\n            />\n\n            {this.state.usersOnPage.map(user => (\n              <UserBar\n                key={uid(user)}\n                username={user.username}\n                reputation={user.reputation}\n                deleteUser={this.deleteUser}\n              />\n            ))}\n          </div>\n\n          <div className=\"admin-dashboard-component\">\n            <AdminSearchBar\n              searchContent={this.state.reviewSearch}\n              handleChange={this.handleReviewSearchChange}\n              enterButton={this.searchReview}\n              refreshButton={this.refreshReviews}\n            />\n\n            {this.state.reviewsOnPage.map(review => (\n              <ReviewBar\n                key={uid(review)}\n                id={review.id}\n                title={review.title}\n                content={review.content}\n                author={review.author}\n                reputation={review.reputation}\n                reported={review.reported}\n                deleteReview={this.deleteReview}\n                cancelReport={this.cancelReport}\n              />\n            ))}\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default Admin;"]},"metadata":{},"sourceType":"module"}