{"ast":null,"code":"import _toConsumableArray from\"/home/abdullah/steam_achievement_tracker-main/achievement-tracker/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"/home/abdullah/steam_achievement_tracker-main/achievement-tracker/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/abdullah/steam_achievement_tracker-main/achievement-tracker/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/home/abdullah/steam_achievement_tracker-main/achievement-tracker/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/abdullah/steam_achievement_tracker-main/achievement-tracker/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/abdullah/steam_achievement_tracker-main/achievement-tracker/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import{uid}from\"react-uid\";import\"bootstrap/dist/css/bootstrap.min.css\";import{CurrentHeaderButton,HeaderButton,HeaderImage,HeadContainer,HeaderNavBar}from'../HeaderComponent';import logo from'./../../steamIcon2.png';import ForumSearchBar from\"../ForumSearchBar\";import Review from\"../Review\";import ReviewSubmit from\"../ReviewSubmit\";import\"./styles.css\";import{addReviewOnForum,getReviewsOnForum,updateReview}from'../../actions/review';import{addVoteRecord,getVoteRecords,updateVoteRecord}from'../../actions/voteRecord';import{getReputation}from'../../actions/reputation';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var log=console.log;var reviewNumLimit=5;var ReviewForum=/*#__PURE__*/function(_React$Component){_inherits(ReviewForum,_React$Component);var _super=_createSuper(ReviewForum);function ReviewForum(props){var _this;_classCallCheck(this,ReviewForum);_this=_super.call(this,props);_this.upvoteAction=function(reviewId){var user=_this.state.userName;if(user===null){alert(\"You have to login before you vote.\");return;}var voteRecordSearch=_this.state.voteRecords.filter(function(record){return record.username===user&&record.reviewId===reviewId;});var voteRecord={};if(voteRecordSearch.length===0){voteRecord={username:user,reviewId:reviewId,vote:\"none\"};addVoteRecord(voteRecord);var newVoteRecords=_this.state.voteRecords;newVoteRecords.push(voteRecord);_this.setState({voteRecords:newVoteRecords});}else{voteRecord=voteRecordSearch[0];}if(voteRecord.vote!==\"upvote\"){var reviewList=_this.state.reviews.map(function(review){if(review.id===reviewId){review.upvotes=review.upvotes+1;if(voteRecord.vote===\"downvote\"){review.downvotes=review.downvotes-1;}}return review;});voteRecord.vote=\"upvote\";_this.setState({reviews:reviewList});}else{var _reviewList=_this.state.reviews.map(function(review){if(review.id===reviewId){review.upvotes=review.upvotes-1;}return review;});voteRecord.vote=\"none\";_this.setState({reviews:_reviewList});}// Update review in database\nupdateReview(_this.state.reviews.filter(function(review){return review.id===reviewId;})[0]);// Update user's vote record in database\nupdateVoteRecord(voteRecord);};_this.downvoteAction=function(reviewId){var user=_this.state.userName;if(user===null){alert(\"You have to login before you vote.\");return;}var voteRecordSearch=_this.state.voteRecords.filter(function(record){return record.username===user&&record.reviewId===reviewId;});var voteRecord={};if(voteRecordSearch.length===0){voteRecord={username:user,reviewId:reviewId,vote:\"none\"};addVoteRecord(voteRecord);var newVoteRecords=_this.state.voteRecords;newVoteRecords.push(voteRecord);_this.setState({voteRecords:newVoteRecords});}else{voteRecord=voteRecordSearch[0];}if(voteRecord.vote!==\"downvote\"){var reviewList=_this.state.reviews.map(function(review){if(review.id===reviewId){review.downvotes=review.downvotes+1;if(voteRecord.vote===\"upvote\"){review.upvotes=review.upvotes-1;}}return review;});voteRecord.vote=\"downvote\";_this.setState({reviews:reviewList});}else{var _reviewList2=_this.state.reviews.map(function(review){if(review.id===reviewId){review.downvotes=review.downvotes-1;}return review;});voteRecord.vote=\"none\";_this.setState({reviews:_reviewList2});}// Update review in database\nupdateReview(_this.state.reviews.filter(function(review){return review.id===reviewId;})[0]);// Update user's vote record in database\nupdateVoteRecord(voteRecord);};_this.reportAction=function(reviewId){log(reviewId);log(_this.state.reviews);var reviewList=_this.state.reviews.map(function(review){if(review.id===reviewId){review.reported=true;}return review;});_this.setState({reviews:reviewList});updateReview(_this.state.reviews.filter(function(review){return review.id===reviewId;})[0]);alert(\"Review reported.\");};_this.handleSearchContentChange=function(event){var target=event.target;_this.setState({searchContent:target.value});};_this.searchReview=function(){var currentSectionReviews=_this.state.reviews.filter(function(review){return review.title.includes(_this.state.searchContent);});var currentPageReviews=currentSectionReviews.slice(0,reviewNumLimit);_this.setState({reviewsInSection:currentSectionReviews,reviewsOnPage:currentPageReviews,currentPage:1});};_this.prevPage=function(){if(_this.state.currentPage>1){var currentPage=_this.state.currentPage-1;var currentPageReviews=_this.state.reviewsInSection.slice((currentPage-1)*reviewNumLimit,(currentPage-1)*reviewNumLimit+reviewNumLimit);_this.setState({reviewsOnPage:currentPageReviews,currentPage:currentPage});}};_this.nextPage=function(){if(_this.state.currentPage<_this.state.reviewsInSection.length/reviewNumLimit){var currentPage=_this.state.currentPage+1;var currentPageReviews=_this.state.reviewsInSection.slice((currentPage-1)*reviewNumLimit,(currentPage-1)*reviewNumLimit+reviewNumLimit);_this.setState({reviewsOnPage:currentPageReviews,currentPage:currentPage});}};_this.firstPage=function(){var currentPageReviews=_this.state.reviewsInSection.slice(0,reviewNumLimit);_this.setState({reviewsOnPage:currentPageReviews,currentPage:1});};_this.lastPage=function(){var currentPage=Math.ceil(_this.state.reviewsInSection.length/reviewNumLimit);var currentPageReviews=_this.state.reviewsInSection.slice((currentPage-1)*reviewNumLimit,(currentPage-1)*reviewNumLimit+reviewNumLimit);_this.setState({reviewsOnPage:currentPageReviews,currentPage:currentPage});};_this.handleSubmitTitleChange=function(event){var target=event.target;_this.setState({reviewSubmitTitle:target.value});};_this.handleSubmitContentChange=function(event){var target=event.target;_this.setState({reviewSubmitContent:target.value});};_this.getAvailableId=function(){if(_this.state.reviews.length===0){return 0;}var idList=_this.state.reviews.map(function(review){return review.id;});var maxId=Math.max.apply(Math,_toConsumableArray(idList));for(var i=0;i<maxId+100;i++){if(!idList.includes(i)){return i;}}log(\"Error: Cannot find available id\");return-1;};_this.addReview=function(){var user=_this.state.userName;var id=_this.getAvailableId();if(!user){alert(\"You have to login before you submit your review.\");return;}else if(_this.state.reviewSubmitTitle===\"\"){alert(\"Review title cannot be empty\");return;}else if(_this.state.reviewSubmitContent===\"\"){alert(\"Review content cannot be empty\");return;}else if(id===-1){alert(\"Error: No available review id\");}var reviewList=_this.state.reviews;var newReview={id:id,title:_this.state.reviewSubmitTitle,content:_this.state.reviewSubmitContent,upvotes:0,downvotes:0,author:_this.state.userName,reputation:_this.state.reputation,reported:false};reviewList.push(newReview);_this.setState({reviewSubmitTitle:\"\",reviewSubmitContent:\"\",reviews:reviewList,reviewsInSection:reviewList,reviewsOnPage:reviewList.slice((_this.state.currentPage-1)*reviewNumLimit,(_this.state.currentPage-1)*reviewNumLimit+reviewNumLimit)});// Update database\naddReviewOnForum(newReview);};_this.refreshForum=function(){var reviewList=_this.state.reviews;_this.setState({reviewsInSection:reviewList,reviewsOnPage:reviewList.slice(0,reviewNumLimit),searchContent:\"\"});};_this.state={userName:localStorage.getItem('currentUser'),searchContent:\"\",reviews:[],reviewsInSection:[],reviewsOnPage:[],currentPage:1,reviewSubmitTitle:\"\",reviewSubmitContent:\"\",voteRecords:[],reputation:1};_this.upvoteAction=_this.upvoteAction.bind(_assertThisInitialized(_this));_this.downvoteAction=_this.downvoteAction.bind(_assertThisInitialized(_this));_this.reportAction=_this.reportAction.bind(_assertThisInitialized(_this));return _this;}_createClass(ReviewForum,[{key:\"componentDidMount\",value:function componentDidMount(){getReviewsOnForum(this,reviewNumLimit);getVoteRecords(this);getReputation(this);}},{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(HeadContainer,{bgId:\"dashboard\",children:/*#__PURE__*/_jsxs(HeaderNavBar,{children:[this.state.userName!==null?/*#__PURE__*/_jsx(HeaderImage,{to:\"/dashboard\",src:logo}):/*#__PURE__*/_jsx(HeaderImage,{to:\"/\",src:logo}),/*#__PURE__*/_jsxs(\"div\",{className:\"group\",children:[/*#__PURE__*/_jsx(CurrentHeaderButton,{path:\"/reviewForum\",children:\"Forum\"}),this.state.userName!==null?/*#__PURE__*/_jsx(HeaderButton,{path:\"/Dashboard\",children:\"Dashboard\"}):/*#__PURE__*/_jsx(HeaderButton,{path:\"/Login\",children:\"Log In\"})]})]})}),/*#__PURE__*/_jsx(ForumSearchBar,{searchContent:this.state.searchContent,handleChange:this.handleSearchContentChange,enterButton:this.searchReview,refreshButton:this.refreshForum}),/*#__PURE__*/_jsxs(\"div\",{className:\"review-section\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Review Section\"}),/*#__PURE__*/_jsx(\"div\",{className:\"page-button-bar\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"btn-group\",role:\"group\",\"aria-label\":\"Basic example\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-dark\",onClick:this.firstPage,children:\"First\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-secondary\",onClick:this.prevPage,children:\"Prev\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-secondary\",onClick:this.nextPage,children:\"Next\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-dark\",onClick:this.lastPage,children:\"Last\"})]})}),this.state.reviewsOnPage.map(function(review){return/*#__PURE__*/_jsx(Review,{id:review.id,title:review.title,content:review.content,upvotes:review.upvotes,downvotes:review.downvotes,author:review.author,reputation:review.reputation,upvoteAction:_this2.upvoteAction,downvoteAction:_this2.downvoteAction,reportAction:_this2.reportAction},uid(review));}),/*#__PURE__*/_jsx(\"div\",{className:\"page-button-bar\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"btn-group\",role:\"group\",\"aria-label\":\"Basic example\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-dark\",onClick:this.firstPage,children:\"First\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-secondary\",onClick:this.prevPage,children:\"Prev\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-secondary\",onClick:this.nextPage,children:\"Next\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-dark\",onClick:this.lastPage,children:\"Last\"})]})})]}),/*#__PURE__*/_jsx(ReviewSubmit,{reviewSubmitTitle:this.state.reviewSubmitTitle,reviewSubmitContent:this.state.reviewSubmitContent,handleTitleChange:this.handleSubmitTitleChange,handleContentChange:this.handleSubmitContentChange,addReview:function addReview(){return _this2.addReview();}})]});}}]);return ReviewForum;}(React.Component);export default ReviewForum;","map":{"version":3,"sources":["/home/abdullah/steam_achievement_tracker-main/achievement-tracker/src/react-components/ReviewForum/index.js"],"names":["React","uid","CurrentHeaderButton","HeaderButton","HeaderImage","HeadContainer","HeaderNavBar","logo","ForumSearchBar","Review","ReviewSubmit","addReviewOnForum","getReviewsOnForum","updateReview","addVoteRecord","getVoteRecords","updateVoteRecord","getReputation","log","console","reviewNumLimit","ReviewForum","props","upvoteAction","reviewId","user","state","userName","alert","voteRecordSearch","voteRecords","filter","record","username","voteRecord","length","vote","newVoteRecords","push","setState","reviewList","reviews","map","review","id","upvotes","downvotes","downvoteAction","reportAction","reported","handleSearchContentChange","event","target","searchContent","value","searchReview","currentSectionReviews","title","includes","currentPageReviews","slice","reviewsInSection","reviewsOnPage","currentPage","prevPage","nextPage","firstPage","lastPage","Math","ceil","handleSubmitTitleChange","reviewSubmitTitle","handleSubmitContentChange","reviewSubmitContent","getAvailableId","idList","maxId","max","i","addReview","newReview","content","author","reputation","refreshForum","localStorage","getItem","bind","Component"],"mappings":"wlCAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,GAAT,KAAoB,WAApB,CACA,MAAO,sCAAP,CAEA,OAASC,mBAAT,CAA8BC,YAA9B,CAA4CC,WAA5C,CAAyDC,aAAzD,CAAwEC,YAAxE,KAA4F,oBAA5F,CACA,MAAOC,CAAAA,IAAP,KAAiB,wBAAjB,CACA,MAAOC,CAAAA,cAAP,KAA2B,mBAA3B,CACA,MAAOC,CAAAA,MAAP,KAAmB,WAAnB,CACA,MAAOC,CAAAA,YAAP,KAAyB,iBAAzB,CACA,MAAO,cAAP,CAEA,OAASC,gBAAT,CAA2BC,iBAA3B,CAA8CC,YAA9C,KAAkE,sBAAlE,CACA,OAASC,aAAT,CAAwBC,cAAxB,CAAwCC,gBAAxC,KAAgE,0BAAhE,CACA,OAASC,aAAT,KAA8B,0BAA9B,C,wFAEA,GAAMC,CAAAA,GAAG,CAAGC,OAAO,CAACD,GAApB,CACA,GAAME,CAAAA,cAAc,CAAG,CAAvB,C,GAEMC,CAAAA,W,sHACF,qBAAYC,KAAZ,CAAmB,6CACf,uBAAMA,KAAN,EADe,MA2BnBC,YA3BmB,CA2BJ,SAAAC,QAAQ,CAAI,CACvB,GAAMC,CAAAA,IAAI,CAAG,MAAKC,KAAL,CAAWC,QAAxB,CACA,GAAIF,IAAI,GAAK,IAAb,CAAmB,CACfG,KAAK,CAAC,oCAAD,CAAL,CACA,OACH,CAED,GAAMC,CAAAA,gBAAgB,CAAG,MAAKH,KAAL,CAAWI,WAAX,CAAuBC,MAAvB,CAA8B,SAAAC,MAAM,CAAI,CAC7D,MAAOA,CAAAA,MAAM,CAACC,QAAP,GAAoBR,IAApB,EAA4BO,MAAM,CAACR,QAAP,GAAoBA,QAAvD,CACH,CAFwB,CAAzB,CAGA,GAAIU,CAAAA,UAAU,CAAG,EAAjB,CACA,GAAIL,gBAAgB,CAACM,MAAjB,GAA4B,CAAhC,CAAmC,CAC/BD,UAAU,CAAG,CACTD,QAAQ,CAAER,IADD,CAETD,QAAQ,CAAEA,QAFD,CAGTY,IAAI,CAAE,MAHG,CAAb,CAKAtB,aAAa,CAACoB,UAAD,CAAb,CACA,GAAMG,CAAAA,cAAc,CAAG,MAAKX,KAAL,CAAWI,WAAlC,CACAO,cAAc,CAACC,IAAf,CAAoBJ,UAApB,EACA,MAAKK,QAAL,CAAc,CACVT,WAAW,CAAEO,cADH,CAAd,EAGH,CAZD,IAYO,CACHH,UAAU,CAAGL,gBAAgB,CAAC,CAAD,CAA7B,CACH,CAED,GAAIK,UAAU,CAACE,IAAX,GAAoB,QAAxB,CAAkC,CAC9B,GAAMI,CAAAA,UAAU,CAAG,MAAKd,KAAL,CAAWe,OAAX,CAAmBC,GAAnB,CAAuB,SAAAC,MAAM,CAAI,CAChD,GAAIA,MAAM,CAACC,EAAP,GAAcpB,QAAlB,CAA4B,CACxBmB,MAAM,CAACE,OAAP,CAAiBF,MAAM,CAACE,OAAP,CAAiB,CAAlC,CACA,GAAIX,UAAU,CAACE,IAAX,GAAoB,UAAxB,CAAoC,CAChCO,MAAM,CAACG,SAAP,CAAmBH,MAAM,CAACG,SAAP,CAAmB,CAAtC,CACH,CACJ,CACD,MAAOH,CAAAA,MAAP,CACH,CARkB,CAAnB,CASAT,UAAU,CAACE,IAAX,CAAkB,QAAlB,CAEA,MAAKG,QAAL,CAAc,CACVE,OAAO,CAAED,UADC,CAAd,EAGH,CAfD,IAeO,CACH,GAAMA,CAAAA,WAAU,CAAG,MAAKd,KAAL,CAAWe,OAAX,CAAmBC,GAAnB,CAAuB,SAAAC,MAAM,CAAI,CAChD,GAAIA,MAAM,CAACC,EAAP,GAAcpB,QAAlB,CAA4B,CACxBmB,MAAM,CAACE,OAAP,CAAiBF,MAAM,CAACE,OAAP,CAAiB,CAAlC,CACH,CACD,MAAOF,CAAAA,MAAP,CACH,CALkB,CAAnB,CAMAT,UAAU,CAACE,IAAX,CAAkB,MAAlB,CAEA,MAAKG,QAAL,CAAc,CACVE,OAAO,CAAED,WADC,CAAd,EAGH,CAED;AACA3B,YAAY,CAAC,MAAKa,KAAL,CAAWe,OAAX,CAAmBV,MAAnB,CAA0B,SAAAY,MAAM,QAAIA,CAAAA,MAAM,CAACC,EAAP,GAAcpB,QAAlB,EAAhC,EAA4D,CAA5D,CAAD,CAAZ,CACA;AACAR,gBAAgB,CAACkB,UAAD,CAAhB,CACH,CAvFkB,OAyFnBa,cAzFmB,CAyFF,SAAAvB,QAAQ,CAAI,CACzB,GAAMC,CAAAA,IAAI,CAAG,MAAKC,KAAL,CAAWC,QAAxB,CACA,GAAIF,IAAI,GAAK,IAAb,CAAmB,CACfG,KAAK,CAAC,oCAAD,CAAL,CACA,OACH,CAED,GAAMC,CAAAA,gBAAgB,CAAG,MAAKH,KAAL,CAAWI,WAAX,CAAuBC,MAAvB,CAA8B,SAAAC,MAAM,CAAI,CAC7D,MAAOA,CAAAA,MAAM,CAACC,QAAP,GAAoBR,IAApB,EAA4BO,MAAM,CAACR,QAAP,GAAoBA,QAAvD,CACH,CAFwB,CAAzB,CAGA,GAAIU,CAAAA,UAAU,CAAG,EAAjB,CACA,GAAIL,gBAAgB,CAACM,MAAjB,GAA4B,CAAhC,CAAmC,CAC/BD,UAAU,CAAG,CACTD,QAAQ,CAAER,IADD,CAETD,QAAQ,CAAEA,QAFD,CAGTY,IAAI,CAAE,MAHG,CAAb,CAKAtB,aAAa,CAACoB,UAAD,CAAb,CACA,GAAMG,CAAAA,cAAc,CAAG,MAAKX,KAAL,CAAWI,WAAlC,CACAO,cAAc,CAACC,IAAf,CAAoBJ,UAApB,EACA,MAAKK,QAAL,CAAc,CACVT,WAAW,CAAEO,cADH,CAAd,EAGH,CAZD,IAYO,CACHH,UAAU,CAAGL,gBAAgB,CAAC,CAAD,CAA7B,CACH,CAED,GAAIK,UAAU,CAACE,IAAX,GAAoB,UAAxB,CAAoC,CAChC,GAAMI,CAAAA,UAAU,CAAG,MAAKd,KAAL,CAAWe,OAAX,CAAmBC,GAAnB,CAAuB,SAAAC,MAAM,CAAI,CAChD,GAAIA,MAAM,CAACC,EAAP,GAAcpB,QAAlB,CAA4B,CACxBmB,MAAM,CAACG,SAAP,CAAmBH,MAAM,CAACG,SAAP,CAAmB,CAAtC,CACA,GAAIZ,UAAU,CAACE,IAAX,GAAoB,QAAxB,CAAkC,CAC9BO,MAAM,CAACE,OAAP,CAAiBF,MAAM,CAACE,OAAP,CAAiB,CAAlC,CACH,CACJ,CACD,MAAOF,CAAAA,MAAP,CACH,CARkB,CAAnB,CASAT,UAAU,CAACE,IAAX,CAAkB,UAAlB,CAEA,MAAKG,QAAL,CAAc,CACVE,OAAO,CAAED,UADC,CAAd,EAGH,CAfD,IAeO,CACH,GAAMA,CAAAA,YAAU,CAAG,MAAKd,KAAL,CAAWe,OAAX,CAAmBC,GAAnB,CAAuB,SAAAC,MAAM,CAAI,CAChD,GAAIA,MAAM,CAACC,EAAP,GAAcpB,QAAlB,CAA4B,CACxBmB,MAAM,CAACG,SAAP,CAAmBH,MAAM,CAACG,SAAP,CAAmB,CAAtC,CACH,CACD,MAAOH,CAAAA,MAAP,CACH,CALkB,CAAnB,CAMAT,UAAU,CAACE,IAAX,CAAkB,MAAlB,CAEA,MAAKG,QAAL,CAAc,CACVE,OAAO,CAAED,YADC,CAAd,EAGH,CAED;AACA3B,YAAY,CAAC,MAAKa,KAAL,CAAWe,OAAX,CAAmBV,MAAnB,CAA0B,SAAAY,MAAM,QAAIA,CAAAA,MAAM,CAACC,EAAP,GAAcpB,QAAlB,EAAhC,EAA4D,CAA5D,CAAD,CAAZ,CACA;AACAR,gBAAgB,CAACkB,UAAD,CAAhB,CACH,CArJkB,OAuJnBc,YAvJmB,CAuJJ,SAAAxB,QAAQ,CAAI,CACvBN,GAAG,CAACM,QAAD,CAAH,CACAN,GAAG,CAAC,MAAKQ,KAAL,CAAWe,OAAZ,CAAH,CACA,GAAMD,CAAAA,UAAU,CAAG,MAAKd,KAAL,CAAWe,OAAX,CAAmBC,GAAnB,CAAuB,SAAAC,MAAM,CAAI,CAChD,GAAIA,MAAM,CAACC,EAAP,GAAcpB,QAAlB,CAA4B,CACxBmB,MAAM,CAACM,QAAP,CAAkB,IAAlB,CACH,CACD,MAAON,CAAAA,MAAP,CACH,CALkB,CAAnB,CAOA,MAAKJ,QAAL,CAAc,CACVE,OAAO,CAAED,UADC,CAAd,EAIA3B,YAAY,CAAC,MAAKa,KAAL,CAAWe,OAAX,CAAmBV,MAAnB,CAA0B,SAAAY,MAAM,QAAIA,CAAAA,MAAM,CAACC,EAAP,GAAcpB,QAAlB,EAAhC,EAA4D,CAA5D,CAAD,CAAZ,CAEAI,KAAK,CAAC,kBAAD,CAAL,CACH,CAxKkB,OA0KnBsB,yBA1KmB,CA0KS,SAAAC,KAAK,CAAI,CACjC,GAAMC,CAAAA,MAAM,CAAGD,KAAK,CAACC,MAArB,CACA,MAAKb,QAAL,CAAc,CACVc,aAAa,CAAED,MAAM,CAACE,KADZ,CAAd,EAGH,CA/KkB,OAiLnBC,YAjLmB,CAiLJ,UAAM,CACjB,GAAMC,CAAAA,qBAAqB,CAAG,MAAK9B,KAAL,CAAWe,OAAX,CAAmBV,MAAnB,CAA0B,SAAAY,MAAM,CAAI,CAC9D,MAAOA,CAAAA,MAAM,CAACc,KAAP,CAAaC,QAAb,CAAsB,MAAKhC,KAAL,CAAW2B,aAAjC,CAAP,CACH,CAF6B,CAA9B,CAGA,GAAMM,CAAAA,kBAAkB,CAAGH,qBAAqB,CAACI,KAAtB,CACvB,CADuB,CAEvBxC,cAFuB,CAA3B,CAKA,MAAKmB,QAAL,CAAc,CACVsB,gBAAgB,CAAEL,qBADR,CAEVM,aAAa,CAAEH,kBAFL,CAGVI,WAAW,CAAE,CAHH,CAAd,EAKH,CA/LkB,OAiMnBC,QAjMmB,CAiMR,UAAM,CACb,GAAI,MAAKtC,KAAL,CAAWqC,WAAX,CAAyB,CAA7B,CAAgC,CAC5B,GAAMA,CAAAA,WAAW,CAAG,MAAKrC,KAAL,CAAWqC,WAAX,CAAyB,CAA7C,CACA,GAAMJ,CAAAA,kBAAkB,CAAG,MAAKjC,KAAL,CAAWmC,gBAAX,CAA4BD,KAA5B,CACvB,CAACG,WAAW,CAAG,CAAf,EAAoB3C,cADG,CAEvB,CAAC2C,WAAW,CAAG,CAAf,EAAoB3C,cAApB,CAAqCA,cAFd,CAA3B,CAIA,MAAKmB,QAAL,CAAc,CACVuB,aAAa,CAAEH,kBADL,CAEVI,WAAW,CAAEA,WAFH,CAAd,EAIH,CACJ,CA7MkB,OA+MnBE,QA/MmB,CA+MR,UAAM,CACb,GAAI,MAAKvC,KAAL,CAAWqC,WAAX,CAAyB,MAAKrC,KAAL,CAAWmC,gBAAX,CAA4B1B,MAA5B,CAAqCf,cAAlE,CAAkF,CAC9E,GAAM2C,CAAAA,WAAW,CAAG,MAAKrC,KAAL,CAAWqC,WAAX,CAAyB,CAA7C,CACA,GAAMJ,CAAAA,kBAAkB,CAAG,MAAKjC,KAAL,CAAWmC,gBAAX,CAA4BD,KAA5B,CACvB,CAACG,WAAW,CAAG,CAAf,EAAoB3C,cADG,CAEvB,CAAC2C,WAAW,CAAG,CAAf,EAAoB3C,cAApB,CAAqCA,cAFd,CAA3B,CAIA,MAAKmB,QAAL,CAAc,CACVuB,aAAa,CAAEH,kBADL,CAEVI,WAAW,CAAEA,WAFH,CAAd,EAIH,CACJ,CA3NkB,OA6NnBG,SA7NmB,CA6NP,UAAM,CACd,GAAMP,CAAAA,kBAAkB,CAAG,MAAKjC,KAAL,CAAWmC,gBAAX,CAA4BD,KAA5B,CACvB,CADuB,CAEvBxC,cAFuB,CAA3B,CAIA,MAAKmB,QAAL,CAAc,CACVuB,aAAa,CAAEH,kBADL,CAEVI,WAAW,CAAE,CAFH,CAAd,EAIH,CAtOkB,OAwOnBI,QAxOmB,CAwOR,UAAM,CACb,GAAMJ,CAAAA,WAAW,CAAGK,IAAI,CAACC,IAAL,CAAU,MAAK3C,KAAL,CAAWmC,gBAAX,CAA4B1B,MAA5B,CAAqCf,cAA/C,CAApB,CACA,GAAMuC,CAAAA,kBAAkB,CAAG,MAAKjC,KAAL,CAAWmC,gBAAX,CAA4BD,KAA5B,CACvB,CAACG,WAAW,CAAG,CAAf,EAAoB3C,cADG,CAEvB,CAAC2C,WAAW,CAAG,CAAf,EAAoB3C,cAApB,CAAqCA,cAFd,CAA3B,CAIA,MAAKmB,QAAL,CAAc,CACVuB,aAAa,CAAEH,kBADL,CAEVI,WAAW,CAAEA,WAFH,CAAd,EAIH,CAlPkB,OAoPnBO,uBApPmB,CAoPO,SAAAnB,KAAK,CAAI,CAC/B,GAAMC,CAAAA,MAAM,CAAGD,KAAK,CAACC,MAArB,CACA,MAAKb,QAAL,CAAc,CACVgC,iBAAiB,CAAEnB,MAAM,CAACE,KADhB,CAAd,EAGH,CAzPkB,OA2PnBkB,yBA3PmB,CA2PS,SAAArB,KAAK,CAAI,CACjC,GAAMC,CAAAA,MAAM,CAAGD,KAAK,CAACC,MAArB,CACA,MAAKb,QAAL,CAAc,CACVkC,mBAAmB,CAAErB,MAAM,CAACE,KADlB,CAAd,EAGH,CAhQkB,OAkQnBoB,cAlQmB,CAkQF,UAAM,CACnB,GAAI,MAAKhD,KAAL,CAAWe,OAAX,CAAmBN,MAAnB,GAA8B,CAAlC,CAAqC,CACjC,MAAO,EAAP,CACH,CAED,GAAMwC,CAAAA,MAAM,CAAG,MAAKjD,KAAL,CAAWe,OAAX,CAAmBC,GAAnB,CAAuB,SAAAC,MAAM,CAAI,CAC5C,MAAOA,CAAAA,MAAM,CAACC,EAAd,CACH,CAFc,CAAf,CAGA,GAAMgC,CAAAA,KAAK,CAAGR,IAAI,CAACS,GAAL,OAAAT,IAAI,oBAAQO,MAAR,EAAlB,CACA,IAAK,GAAIG,CAAAA,CAAC,CAAG,CAAb,CAAgBA,CAAC,CAAGF,KAAK,CAAG,GAA5B,CAAiCE,CAAC,EAAlC,CAAsC,CAClC,GAAI,CAAEH,MAAM,CAACjB,QAAP,CAAgBoB,CAAhB,CAAN,CAA2B,CACvB,MAAOA,CAAAA,CAAP,CACH,CACJ,CACD5D,GAAG,CAAC,iCAAD,CAAH,CACA,MAAO,CAAC,CAAR,CACH,CAlRkB,OAoRnB6D,SApRmB,CAoRP,UAAM,CACd,GAAMtD,CAAAA,IAAI,CAAG,MAAKC,KAAL,CAAWC,QAAxB,CACA,GAAMiB,CAAAA,EAAE,CAAG,MAAK8B,cAAL,EAAX,CACA,GAAI,CAACjD,IAAL,CAAW,CACPG,KAAK,CAAC,kDAAD,CAAL,CACA,OACH,CAHD,IAGO,IAAI,MAAKF,KAAL,CAAW6C,iBAAX,GAAiC,EAArC,CAAyC,CAC5C3C,KAAK,CAAC,8BAAD,CAAL,CACA,OACH,CAHM,IAGA,IAAI,MAAKF,KAAL,CAAW+C,mBAAX,GAAmC,EAAvC,CAA2C,CAC9C7C,KAAK,CAAC,gCAAD,CAAL,CACA,OACH,CAHM,IAGA,IAAIgB,EAAE,GAAK,CAAC,CAAZ,CAAe,CAClBhB,KAAK,CAAC,+BAAD,CAAL,CACH,CAED,GAAMY,CAAAA,UAAU,CAAG,MAAKd,KAAL,CAAWe,OAA9B,CACA,GAAMuC,CAAAA,SAAS,CAAG,CACdpC,EAAE,CAAEA,EADU,CAEda,KAAK,CAAE,MAAK/B,KAAL,CAAW6C,iBAFJ,CAGdU,OAAO,CAAE,MAAKvD,KAAL,CAAW+C,mBAHN,CAId5B,OAAO,CAAE,CAJK,CAKdC,SAAS,CAAE,CALG,CAMdoC,MAAM,CAAE,MAAKxD,KAAL,CAAWC,QANL,CAOdwD,UAAU,CAAE,MAAKzD,KAAL,CAAWyD,UAPT,CAQdlC,QAAQ,CAAE,KARI,CAAlB,CAUAT,UAAU,CAACF,IAAX,CAAgB0C,SAAhB,EACA,MAAKzC,QAAL,CAAc,CACVgC,iBAAiB,CAAE,EADT,CAEVE,mBAAmB,CAAE,EAFX,CAGVhC,OAAO,CAAED,UAHC,CAIVqB,gBAAgB,CAAErB,UAJR,CAKVsB,aAAa,CAAEtB,UAAU,CAACoB,KAAX,CACX,CAAC,MAAKlC,KAAL,CAAWqC,WAAX,CAAyB,CAA1B,EAA+B3C,cADpB,CAEX,CAAC,MAAKM,KAAL,CAAWqC,WAAX,CAAyB,CAA1B,EAA+B3C,cAA/B,CAAgDA,cAFrC,CALL,CAAd,EAWA;AACAT,gBAAgB,CAACqE,SAAD,CAAhB,CACH,CA7TkB,OA+TnBI,YA/TmB,CA+TJ,UAAM,CACjB,GAAM5C,CAAAA,UAAU,CAAG,MAAKd,KAAL,CAAWe,OAA9B,CACA,MAAKF,QAAL,CAAc,CACVsB,gBAAgB,CAAErB,UADR,CAEVsB,aAAa,CAAEtB,UAAU,CAACoB,KAAX,CACX,CADW,CAEXxC,cAFW,CAFL,CAMViC,aAAa,CAAE,EANL,CAAd,EAQH,CAzUkB,CAGf,MAAK3B,KAAL,CAAa,CACTC,QAAQ,CAAE0D,YAAY,CAACC,OAAb,CAAqB,aAArB,CADD,CAETjC,aAAa,CAAE,EAFN,CAGTZ,OAAO,CAAE,EAHA,CAIToB,gBAAgB,CAAE,EAJT,CAKTC,aAAa,CAAE,EALN,CAMTC,WAAW,CAAE,CANJ,CAOTQ,iBAAiB,CAAE,EAPV,CAQTE,mBAAmB,CAAE,EARZ,CAST3C,WAAW,CAAE,EATJ,CAUTqD,UAAU,CAAE,CAVH,CAAb,CAaA,MAAK5D,YAAL,CAAoB,MAAKA,YAAL,CAAkBgE,IAAlB,+BAApB,CACA,MAAKxC,cAAL,CAAsB,MAAKA,cAAL,CAAoBwC,IAApB,+BAAtB,CACA,MAAKvC,YAAL,CAAoB,MAAKA,YAAL,CAAkBuC,IAAlB,+BAApB,CAlBe,aAmBlB,C,yDAED,4BAAoB,CAChB3E,iBAAiB,CAAC,IAAD,CAAOQ,cAAP,CAAjB,CACAL,cAAc,CAAC,IAAD,CAAd,CACAE,aAAa,CAAC,IAAD,CAAb,CACH,C,sBAkTD,iBAAS,iBACL,mBACI,oCACI,KAAC,aAAD,EAAe,IAAI,CAAE,WAArB,uBACI,MAAC,YAAD,YAEQ,KAAKS,KAAL,CAAWC,QAAX,GAAwB,IAAxB,cACI,KAAC,WAAD,EAAa,EAAE,CAAC,YAAhB,CAA6B,GAAG,CAAEpB,IAAlC,EADJ,cAEI,KAAC,WAAD,EAAa,EAAE,CAAC,GAAhB,CAAoB,GAAG,CAAEA,IAAzB,EAJZ,cAMI,aAAK,SAAS,CAAC,OAAf,wBACI,KAAC,mBAAD,EAAqB,IAAI,CAAC,cAA1B,mBADJ,CAGQ,KAAKmB,KAAL,CAAWC,QAAX,GAAwB,IAAxB,cACA,KAAC,YAAD,EAAc,IAAI,CAAC,YAAnB,uBADA,cAEA,KAAC,YAAD,EAAc,IAAI,CAAC,QAAnB,oBALR,GANJ,GADJ,EADJ,cAmBI,KAAC,cAAD,EACI,aAAa,CAAE,KAAKD,KAAL,CAAW2B,aAD9B,CAEI,YAAY,CAAE,KAAKH,yBAFvB,CAGI,WAAW,CAAE,KAAKK,YAHtB,CAII,aAAa,CAAE,KAAK6B,YAJxB,EAnBJ,cA0BI,aAAK,SAAS,CAAC,gBAAf,wBACI,sCADJ,cAGI,YAAK,SAAS,CAAC,iBAAf,uBACI,aAAK,SAAS,CAAC,WAAf,CAA2B,IAAI,CAAC,OAAhC,CAAwC,aAAW,eAAnD,wBACI,eAAQ,IAAI,CAAC,QAAb,CACI,SAAS,CAAC,cADd,CAEI,OAAO,CAAE,KAAKlB,SAFlB,mBADJ,cAMI,eAAQ,IAAI,CAAC,QAAb,CACI,SAAS,CAAC,mBADd,CAEI,OAAO,CAAE,KAAKF,QAFlB,kBANJ,cAWI,eAAQ,IAAI,CAAC,QAAb,CACI,SAAS,CAAC,mBADd,CAEI,OAAO,CAAE,KAAKC,QAFlB,kBAXJ,cAgBI,eAAQ,IAAI,CAAC,QAAb,CACI,SAAS,CAAC,cADd,CAEI,OAAO,CAAE,KAAKE,QAFlB,kBAhBJ,GADJ,EAHJ,CA4BK,KAAKzC,KAAL,CAAWoC,aAAX,CAAyBpB,GAAzB,CAA6B,SAAAC,MAAM,qBAChC,KAAC,MAAD,EAEI,EAAE,CAAEA,MAAM,CAACC,EAFf,CAGI,KAAK,CAAED,MAAM,CAACc,KAHlB,CAII,OAAO,CAAEd,MAAM,CAACsC,OAJpB,CAKI,OAAO,CAAEtC,MAAM,CAACE,OALpB,CAMI,SAAS,CAAEF,MAAM,CAACG,SANtB,CAOI,MAAM,CAAEH,MAAM,CAACuC,MAPnB,CAQI,UAAU,CAAEvC,MAAM,CAACwC,UARvB,CASI,YAAY,CAAE,MAAI,CAAC5D,YATvB,CAUI,cAAc,CAAE,MAAI,CAACwB,cAVzB,CAWI,YAAY,CAAE,MAAI,CAACC,YAXvB,EACS/C,GAAG,CAAC0C,MAAD,CADZ,CADgC,EAAnC,CA5BL,cA4CI,YAAK,SAAS,CAAC,iBAAf,uBACI,aAAK,SAAS,CAAC,WAAf,CAA2B,IAAI,CAAC,OAAhC,CAAwC,aAAW,eAAnD,wBACI,eAAQ,IAAI,CAAC,QAAb,CACI,SAAS,CAAC,cADd,CAEI,OAAO,CAAE,KAAKuB,SAFlB,mBADJ,cAMI,eAAQ,IAAI,CAAC,QAAb,CACI,SAAS,CAAC,mBADd,CAEI,OAAO,CAAE,KAAKF,QAFlB,kBANJ,cAWI,eAAQ,IAAI,CAAC,QAAb,CACI,SAAS,CAAC,mBADd,CAEI,OAAO,CAAE,KAAKC,QAFlB,kBAXJ,cAgBI,eAAQ,IAAI,CAAC,QAAb,CACI,SAAS,CAAC,cADd,CAEI,OAAO,CAAE,KAAKE,QAFlB,kBAhBJ,GADJ,EA5CJ,GA1BJ,cAiGI,KAAC,YAAD,EACI,iBAAiB,CAAE,KAAKzC,KAAL,CAAW6C,iBADlC,CAEI,mBAAmB,CAAE,KAAK7C,KAAL,CAAW+C,mBAFpC,CAGI,iBAAiB,CAAE,KAAKH,uBAH5B,CAII,mBAAmB,CAAE,KAAKE,yBAJ9B,CAKI,SAAS,CAAE,2BAAM,CAAA,MAAI,CAACO,SAAL,EAAN,EALf,EAjGJ,GADJ,CA2GH,C,yBAxbqB/E,KAAK,CAACwF,S,EA2bhC,cAAenE,CAAAA,WAAf","sourcesContent":["import React from \"react\";\nimport { uid } from \"react-uid\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\n\nimport { CurrentHeaderButton, HeaderButton, HeaderImage, HeadContainer, HeaderNavBar } from '../HeaderComponent'\nimport logo from './../../steamIcon2.png'\nimport ForumSearchBar from \"../ForumSearchBar\"\nimport Review from \"../Review\"\nimport ReviewSubmit from \"../ReviewSubmit\"\nimport \"./styles.css\"\n\nimport { addReviewOnForum, getReviewsOnForum, updateReview } from '../../actions/review'\nimport { addVoteRecord, getVoteRecords, updateVoteRecord } from '../../actions/voteRecord'\nimport { getReputation } from '../../actions/reputation'\n\nconst log = console.log\nconst reviewNumLimit = 5;\n\nclass ReviewForum extends React.Component {\n    constructor(props) {\n        super(props)\n\n        this.state = {\n            userName: localStorage.getItem('currentUser'),\n            searchContent: \"\",\n            reviews: [],\n            reviewsInSection: [],\n            reviewsOnPage: [],\n            currentPage: 1,\n            reviewSubmitTitle: \"\",\n            reviewSubmitContent: \"\",\n            voteRecords: [],\n            reputation: 1\n        }\n\n        this.upvoteAction = this.upvoteAction.bind(this)\n        this.downvoteAction = this.downvoteAction.bind(this)\n        this.reportAction = this.reportAction.bind(this)\n    }\n\n    componentDidMount() {\n        getReviewsOnForum(this, reviewNumLimit)\n        getVoteRecords(this)\n        getReputation(this)\n    }\n\n    upvoteAction = reviewId => {\n        const user = this.state.userName\n        if (user === null) {\n            alert(\"You have to login before you vote.\")\n            return\n        }\n\n        const voteRecordSearch = this.state.voteRecords.filter(record => {\n            return record.username === user && record.reviewId === reviewId\n        })\n        let voteRecord = {}\n        if (voteRecordSearch.length === 0) {\n            voteRecord = {\n                username: user,\n                reviewId: reviewId,\n                vote: \"none\"\n            }\n            addVoteRecord(voteRecord)\n            const newVoteRecords = this.state.voteRecords\n            newVoteRecords.push(voteRecord)\n            this.setState({\n                voteRecords: newVoteRecords\n            })\n        } else {\n            voteRecord = voteRecordSearch[0]\n        }\n\n        if (voteRecord.vote !== \"upvote\") {\n            const reviewList = this.state.reviews.map(review => {\n                if (review.id === reviewId) {\n                    review.upvotes = review.upvotes + 1\n                    if (voteRecord.vote === \"downvote\") {\n                        review.downvotes = review.downvotes - 1\n                    }\n                }\n                return review\n            })\n            voteRecord.vote = \"upvote\"\n\n            this.setState({\n                reviews: reviewList,\n            })\n        } else {\n            const reviewList = this.state.reviews.map(review => {\n                if (review.id === reviewId) {\n                    review.upvotes = review.upvotes - 1\n                }\n                return review\n            })\n            voteRecord.vote = \"none\"\n\n            this.setState({\n                reviews: reviewList,\n            })\n        }\n\n        // Update review in database\n        updateReview(this.state.reviews.filter(review => review.id === reviewId)[0])\n        // Update user's vote record in database\n        updateVoteRecord(voteRecord)\n    }\n\n    downvoteAction = reviewId => {\n        const user = this.state.userName\n        if (user === null) {\n            alert(\"You have to login before you vote.\")\n            return\n        }\n\n        const voteRecordSearch = this.state.voteRecords.filter(record => {\n            return record.username === user && record.reviewId === reviewId\n        })\n        let voteRecord = {}\n        if (voteRecordSearch.length === 0) {\n            voteRecord = {\n                username: user,\n                reviewId: reviewId,\n                vote: \"none\"\n            }\n            addVoteRecord(voteRecord)\n            const newVoteRecords = this.state.voteRecords\n            newVoteRecords.push(voteRecord)\n            this.setState({\n                voteRecords: newVoteRecords\n            })\n        } else {\n            voteRecord = voteRecordSearch[0]\n        }\n\n        if (voteRecord.vote !== \"downvote\") {\n            const reviewList = this.state.reviews.map(review => {\n                if (review.id === reviewId) {\n                    review.downvotes = review.downvotes + 1\n                    if (voteRecord.vote === \"upvote\") {\n                        review.upvotes = review.upvotes - 1\n                    }\n                }\n                return review\n            })\n            voteRecord.vote = \"downvote\"\n\n            this.setState({\n                reviews: reviewList\n            })\n        } else {\n            const reviewList = this.state.reviews.map(review => {\n                if (review.id === reviewId) {\n                    review.downvotes = review.downvotes - 1\n                }\n                return review\n            })\n            voteRecord.vote = \"none\"\n\n            this.setState({\n                reviews: reviewList\n            })\n        }\n\n        // Update review in database\n        updateReview(this.state.reviews.filter(review => review.id === reviewId)[0])\n        // Update user's vote record in database\n        updateVoteRecord(voteRecord)\n    }\n\n    reportAction = reviewId => {\n        log(reviewId)\n        log(this.state.reviews)\n        const reviewList = this.state.reviews.map(review => {\n            if (review.id === reviewId) {\n                review.reported = true\n            }\n            return review\n        })\n\n        this.setState({\n            reviews: reviewList\n        })\n\n        updateReview(this.state.reviews.filter(review => review.id === reviewId)[0])\n\n        alert(\"Review reported.\")\n    }\n\n    handleSearchContentChange = event => {\n        const target = event.target;\n        this.setState({\n            searchContent: target.value\n        })\n    }\n\n    searchReview = () => {\n        const currentSectionReviews = this.state.reviews.filter(review => {\n            return review.title.includes(this.state.searchContent)\n        })\n        const currentPageReviews = currentSectionReviews.slice(\n            0,\n            reviewNumLimit\n        )\n\n        this.setState({\n            reviewsInSection: currentSectionReviews,\n            reviewsOnPage: currentPageReviews,\n            currentPage: 1\n        })\n    }\n\n    prevPage = () => {\n        if (this.state.currentPage > 1) {\n            const currentPage = this.state.currentPage - 1\n            const currentPageReviews = this.state.reviewsInSection.slice(\n                (currentPage - 1) * reviewNumLimit,\n                (currentPage - 1) * reviewNumLimit + reviewNumLimit\n            )\n            this.setState({\n                reviewsOnPage: currentPageReviews,\n                currentPage: currentPage\n            })\n        }\n    }\n\n    nextPage = () => {\n        if (this.state.currentPage < this.state.reviewsInSection.length / reviewNumLimit) {\n            const currentPage = this.state.currentPage + 1\n            const currentPageReviews = this.state.reviewsInSection.slice(\n                (currentPage - 1) * reviewNumLimit,\n                (currentPage - 1) * reviewNumLimit + reviewNumLimit\n            )\n            this.setState({\n                reviewsOnPage: currentPageReviews,\n                currentPage: currentPage\n            })\n        }\n    }\n\n    firstPage = () => {\n        const currentPageReviews = this.state.reviewsInSection.slice(\n            0,\n            reviewNumLimit\n        )\n        this.setState({\n            reviewsOnPage: currentPageReviews,\n            currentPage: 1\n        })\n    }\n\n    lastPage = () => {\n        const currentPage = Math.ceil(this.state.reviewsInSection.length / reviewNumLimit)\n        const currentPageReviews = this.state.reviewsInSection.slice(\n            (currentPage - 1) * reviewNumLimit,\n            (currentPage - 1) * reviewNumLimit + reviewNumLimit\n        )\n        this.setState({\n            reviewsOnPage: currentPageReviews,\n            currentPage: currentPage\n        })\n    }\n\n    handleSubmitTitleChange = event => {\n        const target = event.target;\n        this.setState({\n            reviewSubmitTitle: target.value\n        })\n    }\n\n    handleSubmitContentChange = event => {\n        const target = event.target;\n        this.setState({\n            reviewSubmitContent: target.value\n        })\n    }\n\n    getAvailableId = () => {\n        if (this.state.reviews.length === 0) {\n            return 0\n        }\n\n        const idList = this.state.reviews.map(review => {\n            return review.id\n        })\n        const maxId = Math.max(...idList)\n        for (let i = 0; i < maxId + 100; i++) {\n            if (!(idList.includes(i))) {\n                return i\n            }\n        }\n        log(\"Error: Cannot find available id\")\n        return -1\n    }\n\n    addReview = () => {\n        const user = this.state.userName\n        const id = this.getAvailableId()\n        if (!user) {\n            alert(\"You have to login before you submit your review.\")\n            return\n        } else if (this.state.reviewSubmitTitle === \"\") {\n            alert(\"Review title cannot be empty\")\n            return\n        } else if (this.state.reviewSubmitContent === \"\") {\n            alert(\"Review content cannot be empty\")\n            return\n        } else if (id === -1) {\n            alert(\"Error: No available review id\")\n        }\n\n        const reviewList = this.state.reviews\n        const newReview = {\n            id: id,\n            title: this.state.reviewSubmitTitle,\n            content: this.state.reviewSubmitContent,\n            upvotes: 0,\n            downvotes: 0,\n            author: this.state.userName,\n            reputation: this.state.reputation,\n            reported: false\n        }\n        reviewList.push(newReview)\n        this.setState({\n            reviewSubmitTitle: \"\",\n            reviewSubmitContent: \"\",\n            reviews: reviewList,\n            reviewsInSection: reviewList,\n            reviewsOnPage: reviewList.slice(\n                (this.state.currentPage - 1) * reviewNumLimit,\n                (this.state.currentPage - 1) * reviewNumLimit + reviewNumLimit\n            )\n        })\n\n        // Update database\n        addReviewOnForum(newReview)\n    }\n\n    refreshForum = () => {\n        const reviewList = this.state.reviews\n        this.setState({\n            reviewsInSection: reviewList,\n            reviewsOnPage: reviewList.slice(\n                0,\n                reviewNumLimit\n            ),\n            searchContent: \"\"\n        })\n    }\n\n    render() {\n        return (\n            <div>\n                <HeadContainer bgId={\"dashboard\"}>\n                    <HeaderNavBar>\n                        {\n                            this.state.userName !== null ?\n                                <HeaderImage to='/dashboard' src={logo} /> :\n                                <HeaderImage to='/' src={logo} />\n                        }\n                        <div className='group'>\n                            <CurrentHeaderButton path='/reviewForum'>Forum</CurrentHeaderButton>\n                            {\n                                this.state.userName !== null ?\n                                <HeaderButton path='/Dashboard'>Dashboard</HeaderButton> :\n                                <HeaderButton path='/Login'>Log In</HeaderButton>\n                            }\n                        </div>\n                    </HeaderNavBar>\n                </HeadContainer>\n\n                <ForumSearchBar\n                    searchContent={this.state.searchContent}\n                    handleChange={this.handleSearchContentChange}\n                    enterButton={this.searchReview}\n                    refreshButton={this.refreshForum}\n                />\n\n                <div className=\"review-section\">\n                    <h1>Review Section</h1>\n\n                    <div className=\"page-button-bar\">\n                        <div className=\"btn-group\" role=\"group\" aria-label=\"Basic example\">\n                            <button type=\"button\"\n                                className=\"btn btn-dark\"\n                                onClick={this.firstPage}>\n                                First\n              </button>\n                            <button type=\"button\"\n                                className=\"btn btn-secondary\"\n                                onClick={this.prevPage}>\n                                Prev\n              </button>\n                            <button type=\"button\"\n                                className=\"btn btn-secondary\"\n                                onClick={this.nextPage}>\n                                Next\n              </button>\n                            <button type=\"button\"\n                                className=\"btn btn-dark\"\n                                onClick={this.lastPage}>\n                                Last\n              </button>\n                        </div>\n                    </div>\n\n                    {this.state.reviewsOnPage.map(review => (\n                        <Review\n                            key={uid(review)}\n                            id={review.id}\n                            title={review.title}\n                            content={review.content}\n                            upvotes={review.upvotes}\n                            downvotes={review.downvotes}\n                            author={review.author}\n                            reputation={review.reputation}\n                            upvoteAction={this.upvoteAction}\n                            downvoteAction={this.downvoteAction}\n                            reportAction={this.reportAction}\n                        />\n                    ))}\n\n                    <div className=\"page-button-bar\">\n                        <div className=\"btn-group\" role=\"group\" aria-label=\"Basic example\">\n                            <button type=\"button\"\n                                className=\"btn btn-dark\"\n                                onClick={this.firstPage}>\n                                First\n              </button>\n                            <button type=\"button\"\n                                className=\"btn btn-secondary\"\n                                onClick={this.prevPage}>\n                                Prev\n              </button>\n                            <button type=\"button\"\n                                className=\"btn btn-secondary\"\n                                onClick={this.nextPage}>\n                                Next\n              </button>\n                            <button type=\"button\"\n                                className=\"btn btn-dark\"\n                                onClick={this.lastPage}>\n                                Last\n              </button>\n                        </div>\n                    </div>\n\n                </div>\n\n                <ReviewSubmit\n                    reviewSubmitTitle={this.state.reviewSubmitTitle}\n                    reviewSubmitContent={this.state.reviewSubmitContent}\n                    handleTitleChange={this.handleSubmitTitleChange}\n                    handleContentChange={this.handleSubmitContentChange}\n                    addReview={() => this.addReview()}\n                />\n            </div>\n        )\n    }\n}\n\nexport default ReviewForum;"]},"metadata":{},"sourceType":"module"}